# 视觉语义 RAG 系统 (Visual Semantic RAG System)

> **Google 工程师评价**：本项目展示了 RAG (检索增强生成) 领域的高度工程化成熟度。其核心亮点在于“结构感知的 OCR 清洗”与“多阶段检索流水线”，成功解决了复杂文档（如扫描件、多级标题文档）在 RAG 系统中语义碎片化的痛点。

## 1. 产品愿景 (Product Vision)
本项目旨在构建一个能够深度理解复杂 PDF 文档结构的 RAG 系统。不同于传统的纯文本切片，本系统通过物理坐标分析与 LLM 语义修复，保留了文档的层级结构（H1, H2），从而为大模型提供更具上下文相关性的知识块，显著提升在专业垂直领域（如航空规章、技术手册）的问答准确率。

## 2. 用户故事 (User Story)

### 场景 A：专业文档管理员
* **作为** 一名航空公司安全员，
* **我想要** 将厚重的 PDF 安全手册导入系统，且系统能自动识别“第几章-第几节”的从属关系，
* **以便于** 在发生紧急情况查询时，AI 能准确告诉我该规定出自哪个具体章节，而不是一段断章取义的文字。

### 场景 B：研发工程师
* **作为** 一名算法工程师，
* **我想要** 一个带有全链路深度日志的 RAG 调试台，能清晰看到“重写-召回-重排-生成”的每一个中间结果，
* **以便于** 针对特定查询调优 Top-K 参数和模型权重。

## 3. 功能地图 (Function Map)

### 第一阶段：视觉解析 (Day 1)
- **OCR 增强提取**：集成 Tesseract 与 OpenCV 预处理，支持扫描件识别。
- **物理坐标合并**：基于行高与间距自动合并碎词。
- **LLM 语义洗白**：调用 DeepSeek 等模型修复 OCR 错别字并注入 Markdown 结构标签。

### 第二阶段：结构化 ETL (Day 2)
- **层级维持切片**：在切片中自动注入 H1 > H2 的上下文路径。
- **智能断句**：利用正则与标点符号，确保语义块不被硬切。

### 第三阶段：向量化与索引 (Day 3)
- **BGE-M3 嵌入**：支持内网/云端双模式向量化。
- **SQLite 工业级存储**：持久化存储文本、向量（BLOB）及元数据。

### 第四阶段：交互式问答 (Final)
- **Query 重写**：自动将用户口语转化为描述性检索词。
- **双路重排 (Rerank)**：向量初步召回 + BGE-Reranker 精准排序。
- **粒子动态 UI**：极简且具科技感的交互界面。

---
## 📚 导航文档库
- **产品白皮书**: [PRODUCT.md](./PRODUCT.md) - 核心价值与市场定位。
- **软件需求规格**: [SRS.md](./SRS.md) - 功能与非功能需求详情。
- **开发架构文档**: [DEVELOPMENT.md](./DEVELOPMENT.md) - 深入了解系统设计。
- **代码结构指南**: [CODE_STRUCTURE.md](./CODE_STRUCTURE.md) - 模块化设计与代码地图。
- **可视化流程图**: [DIAGRAMS.md](./DIAGRAMS.md) - 系统架构与时序图。
- **用户使用手册**: [USER_GUIDE.md](./USER_GUIDE.md) - 快速上手指南。
